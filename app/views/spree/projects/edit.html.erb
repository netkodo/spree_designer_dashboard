<div class="row">
  <div class="col-md-3">
    <%= render :partial => "spree/boards/dashboard_menu", :locals => {:selected => "projects"} %>
  </div>

  <div class="col-md-9">
    <%= form_for @project, :method => 'patch',:url => project_path, html: {id: "update_project_form"} do |f| %>
        <% update = @project.created_at.present? ? true : false %>
        <div class="row">
          <div class="col-md-8 col-md-offset-2">
            <div class="step step-1" style="display: none;">
              <h2>STEP 1</h2>
              <div class="col-md-12 text-center">
                <h1>Customer Information</h1>
              </div>
              <%= render :partial => "step1", locals: {f: f, u: update} %>
              <div class="text-right">
                <button class="btn btn-primary text-right project-next-step btn-no-radius" data-step="2">Next</button>
              </div>
            </div>

            <div class="step step-2" style="display: none;">
              <h2>STEP 2</h2>
              <div class="col-md-12 text-center">
                <h1>Billing Method</h1>
              </div>
              <%= render :partial => "step2", locals: {f: f, u: update} %>
              <div class="text-right">
                <%if update %>
                    <button class="btn btn-primary text-right project-prev-step btn-no-radius" data-step="1">Back</button>
                <% end %>
                <button class="btn btn-primary project-next-step btn-no-radius" data-step="3">Next</button>
              </div>
            </div>

            <div class="step step-3" style="display: none;">
              <h2>STEP 3</h2>
              <div class="col-md-12 text-center">
                <h1>Select a Contract</h1>
              </div>
              <%= render :partial => "step3", locals: {f: f, u: update} %>
              <div class="form-actions text-right">
                <%if update %>
                    <button class="btn btn-primary text-right project-prev-step btn-no-radius" data-step="2">Back</button>
                <% end %>
                <button class="btn btn-primary text-right project-next-step btn-no-radius" data-step="4">Next</button>
              </div>
            </div>

            <div class="step step-4">
              <div class="col-md-12 text-center">
                <h1>PROJECT DETAILS</h1>
              </div>
              <%= render :partial => "step4", locals: {f: f, u: update} %>
              <%= render :partial => "project_history" %>
              <div class="row text-center">
                <%= link_to "PREVIEW CONTRACT", preview_contract_path(id: @project.id, format: :pdf),class: "btn btn-primary send-contract", id: "preview_contract", target: "_blank" %>
              </div>
              <div class="row text-center">
                <% if @project.contract.present? %>
                    <% if @project.contract.client_signed and !@project.contract.designer_signed %>
                      <%= link_to "SIGN CONTRACT", new_contract_path(@project), class: "btn btn-primary send-contract" %>
                    <% elsif @project.contract.client_signed and @project.contract.designer_signed %>
                      <div class="btn btn-primary send-contract js-send-contract">SEND CONTRACT</div>
                    <% else %>
                      <div class="btn btn-primary send-contract disabled">Client haven't signed contract yet.</div>
                    <% end %>
                <% else %>
                  <div class="btn btn-primary send-contract js-send-contract">SEND CONTRACT</div>
                <% end %>
              </div>
              <div class="form-actions text-center">
                <%= f.submit "UPDATE", :class => 'btn btn-primary btn-no-radius' %>
              </div>
            </div>

          </div>
        </div>


    <% end %>
  </div>
</div>

<%= render partial: "send_contract_modal" %>