<% if @portfolios_ordering.any? %>

    <div class="row col-md-12 text-center">
      <h1>SHOP PORTFOLIOS</h1>
    </div>

    <div class="col-md-3">
      <div class="portfolio-filters">
      <h4>Room Type<span class="toggle-filter"><%= params[:filter].present? ? (params[:filter][:room_type].present? ? '-' : '+') : '-' %></span></h4>
      <div class="filter room_type <%= params[:filter].present? ? (params[:filter][:room_type].present? ? '' : 'filter-hide') : '' %>">
        <ul>
          <% @room_type.each do |k,v| %>
              <li>
                <a class="<%= 'gold_select' if params[:filter].present? and params[:filter][:room_type].present? and params[:filter][:room_type].include? k[1].to_s %>" data-value="<%= k[1] %>" data-value=<%= k[1] %> data-filter="room_type" >
                  <%= k[0] %>
                  <span class="count">(<%= v %>)</span>
                  <%= '<i class="fa fa-times"></i>'.html_safe if params[:filter].present? and params[:filter][:room_type].present? and params[:filter][:room_type].include? k[1].to_s %>
                </a>
              </li>
          <% end %>
        </ul>
      </div>

      <h4>Room Style<span class="toggle-filter"><%= (params[:filter].present? and params[:filter][:style].present?) ? "-":"+" %></span></h4>
      <div class="filter room_style <%= (params[:filter].present? and params[:filter][:style].present?) ? '' : 'filter-hide' %>">
        <ul>
          <% @room_style.each do |k,v| %>
              <li>
                <a class="<%= 'gold_select' if params[:filter].present? and params[:filter][:style].present? and params[:filter][:style].include? k[1].to_s %>" data-value="<%= k[1] %>" data-value=<%= k[1] %> data-filter="room_style" >
                  <%= k[0] %>
                  <span class="count">(<%= v %>)</span>
                  <%= '<i class="fa fa-times"></i>'.html_safe if params[:filter].present? and params[:filter][:style].present? and params[:filter][:style].include? k[1].to_s %>
                </a>
              </li>
          <% end %>
        </ul>
      </div>

      <h4>Wall Color<span class="toggle-filter"><%= (params[:filter].present? and params[:filter][:wall_color].present?) ? "-":"+" %></span></h4>
      <div class="filter color <%= (params[:filter].present? and params[:filter][:wall_color].present?) ? '' : 'filter-hide' %>">
        <ul>
          <% @colors.each do |k,v| %>
              <li>
                <a class="<%= 'gold_select' if params[:filter].present? and params[:filter][:wall_color].present? and params[:filter][:wall_color].include? k[1].to_s %>" data-value="<%= k[1] %>" data-filter="color" >
                  <%= k[0] %>
                  <span class="count">(<%= v %>)</span>
                  <%= '<i class="fa fa-times"></i>'.html_safe if params[:filter].present? and params[:filter][:wall_color].present? and params[:filter][:wall_color].include? k[1].to_s %>
                </a>
              </li>
          <% end %>
        </ul>
      </div>

      <h4>Designer<span class="toggle-filter"><%= (params[:filter].present? and params[:filter][:user_id].present?) ? "-":"+" %></span></h4>
      <div class="filter designer <%= (params[:filter].present? and params[:filter][:user_id].present?) ? '' : 'filter-hide' %>">
        <ul>
          <% @designers.each do |k,v| %>
              <li>
                <a class="<%= 'gold_select' if params[:filter].present? and params[:filter][:user_id].present? and params[:filter][:user_id].include? k[1].to_s %>" data-value="<%= k[1] %>" data-value=<%= k[1] %> data-filter="designer" >
                  <%= k[0] %>
                  <span class="count">(<%= v %>)</span>
                  <%= '<i class="fa fa-times"></i>'.html_safe if params[:filter].present? and params[:filter][:user_id].present? and params[:filter][:user_id].include? k[1].to_s %>
                </a>
              </li>
          <% end %>
        </ul>
      </div>
      </div>
    </div>
    <div class="col-md-9">

      <div class="js-spinner"><%= image_tag("frontend/preloader64.gif")%></div>

      <div class="result row">
        <% @portfolios_ordering.each do |k,v| %>

            <div class="col-md-4 col-xs-6 col-sm-6 no-paddings">

            <% v.each do |p| %>

              <div class="col-md-12 col-sm-12 col-xs-12 portfolio small-paddings">

                <div class="image">
                  <% if p.board.present? and p.board.status=="published" %>
                    <%= link_to image_tag(p.portfolio_image.url),show_portfolio_path(p.board) %>
                  <% else %>
                    <%= image_tag p.portfolio_image.url, class: "img-responsive img-container", :data => {:id => p.id} %>
                  <% end %>
                </div>

                <div class="shop-portfolio col-md-12 col-xs-12 col-sm-12 <%= 'no-bottom-radius' if p.board.present? %>">

                  <div class="text-center">
                    <%# if p.board.present? or spree_current_user.present? %>
                        <div class="social-portfolio" data-pid=<%= p.id %> data-uid=<%= spree_current_user.id if spree_current_user.present? %> >
                          <%
                            media,description = ""
                            media = p.portfolio_image.url.split("?")[0].to_s if p.portfolio_image.url.present?
                            description = strip_tags(p.board.description) if p.board.present? and p.board.description.present?
                            url = p.board.present? ? show_portfolio_path(p.board) : 'https://www.scoutandnimble.com/portfolios'
                            portfolio_name = p.name if p.name.present?
                          %>

                          <div class="favorits">
                            <div class="shared-icon" >
                              <a data-pin-do="buttonPin" data-pin-custom="true" href="//www.pinterest.com/pin/create/button/?url=<%= url %>&media=<%= media %>&description=<%= description %>">
                                <%= image_tag("frontend/pinterest.png",style: "background-color: #c9cace;position:relative;top:-1px;") %>
                              </a>
                              <!-- Please call pinit.js only once per page -->
                              <script async defer src="//assets.pinterest.com/js/pinit.js"></script>
                            </div>
                          </div>


                          <% if spree_current_user.present? %>
                              <div class="favorits">
                                <div class="favorite fav add-to-portfolio-favorites <%= "hidden" if p.is_favorite?(spree_current_user) %>">
                                  <i class="fa fa-heart fa-white"></i>
                                </div>
                                <div class="favorite fav remove-from-portfolio-favorites <%= "hidden" unless p.is_favorite?(spree_current_user) %>">
                                  <i class="fa fa-heart fa-red"></i>
                                </div>
                              </div>
                            <% end %>

                          <div class="favorits">
                            <div class="shared-icon" >

                              <a onclick="return window.open('https://www.facebook.com/dialog/feed?app_id=145634995501895&display=popup&name=<%= portfolio_name %>&description=<%= description %>&link=<%= url %>', 520, 570)">
                                <%= image_tag("frontend/facebook.png",style: "background-color: #c9cace;position:relative;top:-1px;") %>
                              </a>
                            </div>
                          </div>


                        </div>
                    <%# end %>
                  </div>


                  <div class="details"><%= p.name %></div>
                  <div>
                    <div class="col-md-3 col-xs-4 col-sm-4 text-center small-paddings">
                      <%= p.user.user_images.present? ? link_to(image_tag(p.user.user_images.first.attachment.url(:mini), class: "style-img default-img"),"/#{p.user.username}" ) : link_to(image_tag(p.user.user_images.new.attachment.url(:mini), class: "style-img default-img"),"/#{p.user.username}") %>
                    </div>

                    <div class="col-md-9 col-xs-8 col-sm-8 profile-link small-paddings">
                      <div class="designer_name_div">
                        <span class="designer_name"><%= link_to(p.user.full_name,"/#{p.user.username}") %></span>
                      </div>
                      <div class="designer_company_div">
                        <span class="designer_company"><%= p.user.company_name %></span>
                      </div>
                    </div>
                  </div>




                </div>

                <% if p.board.present? and p.board.status=="published" %>
                  <div class="shop-portfolio col-md-12 col-xs-12 col-sm-12">
                    <div></div>
                    <div class="col-md-12 col-xs-12 col-sm-12 text-center no-paddings">
                      <%= link_to "Shop the Look",show_portfolio_url(p.board), class: "btn btn-primary" %>
                    </div>
                  </div>
                <% end %>


              </div>
            <% end %>
            </div>
        <% end %>
      </div>

      <div class="hidden paginate-to-remove">
        <%= paginate @portfolios %>
      </div>

    </div>
<% else %>
    <div class="row col-md-12 text-center">
      <h1>THERE IS NO PORTFOLIOS YET</h1>
    </div>
<% end %>