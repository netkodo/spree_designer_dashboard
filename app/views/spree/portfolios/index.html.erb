<% content_for :scripts do %>
    <%= javascript_include_tag 'spree/portfolio.js' %>
<% end %>

<div class="row portfolios" id="portfolios-content">

  <div class="row col-md-12 text-center">
    <h1>SHOP PORTFOLIO'S</h1>
  </div>

  <div class="col-md-3">

    <h4>Room Type</h4>
    <div class="filter room_type">
      <ul>
        <% @room_type.each do |k,v| %>
            <li>
              <a class="<%= 'gold_select' if params[:filter].present? and params[:filter][:room_type].present? and params[:filter][:room_type].include? k[1].to_s %>" data-value="<%= k[1] %>" data-value=<%= k[1] %> data-filter="room_type" >
                <%= k[0] %>
                <span class="count">(<%= v %>)</span>
                <%= '<i class="fa fa-times"></i>'.html_safe if params[:filter].present? and params[:filter][:room_type].present? and params[:filter][:room_type].include? k[1].to_s %>
              </a>
            </li>
        <% end %>
      </ul>
    </div>

    <h4>Room Style</h4>
    <div class="filter room_style">
      <ul>
        <% @room_style.each do |k,v| %>
            <li>
              <a class="<%= 'gold_select' if params[:filter].present? and params[:filter][:style].present? and params[:filter][:style].include? k[1].to_s %>" data-value="<%= k[1] %>" data-value=<%= k[1] %> data-filter="room_style" >
                <%= k[0] %>
                <span class="count">(<%= v %>)</span>
                <%= '<i class="fa fa-times"></i>'.html_safe if params[:filter].present? and params[:filter][:style].present? and params[:filter][:style].include? k[1].to_s %>
              </a>
            </li>
        <% end %>
      </ul>
    </div>

    <h4>Wall Color</h4>
    <div class="filter color">
      <ul>
        <% @colors.each do |k,v| %>
            <li>
              <a class="<%= 'gold_select' if params[:filter].present? and params[:filter][:color_id].present? and params[:filter][:color_id].include? k[1].to_s %>" data-value="<%= k[1] %>" data-filter="color" >
                <%= k[0] %>
                <span class="count">(<%= v %>)</span>
                <%= '<i class="fa fa-times"></i>'.html_safe if params[:filter].present? and params[:filter][:color_id].present? and params[:filter][:color_id].include? k[1].to_s %>
              </a>
            </li>
        <% end %>
      </ul>
    </div>

    <h4>Designer</h4>
    <div class="filter designer">
      <ul>
        <% @designers.each do |k,v| %>
            <li>
              <a class="<%= 'gold_select' if params[:filter].present? and params[:filter][:user_id].present? and params[:filter][:user_id].include? k[1].to_s %>" data-value="<%= k[1] %>" data-value=<%= k[1] %> data-filter="designer" >
                <%= k[0] %>
                <span class="count">(<%= v %>)</span>
                <%= '<i class="fa fa-times"></i>'.html_safe if params[:filter].present? and params[:filter][:user_id].present? and params[:filter][:user_id].include? k[1].to_s %>
              </a>
            </li>
        <% end %>
      </ul>
    </div>

  </div>
  <div class="col-md-9">

    <div class="js-spinner"><%= image_tag("frontend/preloader64.gif")%></div>

    <div class="result">
      <% @portfolios.in_groups_of(4,false) do |p_row| %>

          <div class="row">

          <% for p in p_row %>

            <div class="col-md-3 portfolio">

              <div class="image">
                <% if p.board.present? %>
                  <%= link_to image_tag(p.portfolio_image.url),room_path(p.board) %>
                <% else %>
                  <%= image_tag p.portfolio_image.url, class: "img-responsive" %>
                <% end %>
              </div>

              <div class="shop-portfolio col-md-12">

                <div class="text-center">
                  <% if p.board.present? or spree_current_user.present? %>
                      <div class="social-portfolio" data-pid=<%= p.id %> data-uid=<%= spree_current_user.id if spree_current_user.present? %> >
                        <% if p.board.present? %>
                            <div id="pinterest-separate-button-render" class="at-share-tbx-element addthis_20x20_style addthis-smartlayers addthis-animated at4-show" >

                              <a data-pin-do="buttonPin" data-pin-custom="true" href="//www.pinterest.com/pin/create/button/?url=<%= room_url(p.board) %>&media=<%= p.portfolio_image.url %>&description=<%= p.name %>">
                                <%= image_tag("frontend/pinterest.png",height: 20, class: "at4-icon aticon-pinterest_share",style: "background-color: #c9cace;position:relative;top:-1px;") %>
                              </a>
                              <!-- Please call pinit.js only once per page -->
                              <script async defer src="//assets.pinterest.com/js/pinit.js"></script>
                            </div>
                        <% end %>

                        <% if spree_current_user.present? %>
                            <div class="favorite add-to-portfolio-favorites <%= "hidden" if p.is_favorite?(spree_current_user) %>">
                              <i class="fa fa-heart fa-white"></i>
                            </div>
                            <div class="favorite remove-from-portfolio-favorites <%= "hidden" unless p.is_favorite?(spree_current_user) %>">
                              <i class="fa fa-heart fa-red"></i>
                            </div>
                        <% end %>

                      </div>
                  <% end %>
                </div>


                <div class="details"><%= p.name %></div>
                <div>
                  <div class="col-md-4 no-paddings">
                    <%= image_tag p.user.logo_image.attachment.url(:mini) %>
                  </div>

                  <div class="col-md-8 no-paddings">
                    <span class="details"><%= p.user.full_name %></span>
                    <br>
                    <span><%= p.user.company_name %></span>
                  </div>
                </div>

                <% if p.board.present? %>
                    <div class="col-md-12 text-center">
                      <button class="btn btn-primary">Shop the Look</button>
                    </div>
                <% end %>


              </div>
            </div>
          <% end %>
          </div>
      <% end %>
    </div>

  </div>
</div>