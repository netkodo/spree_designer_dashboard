<html>
  <head>
    <%= stylesheet_link_tag wicked_pdf_asset_base64('spree/frontend/styles.css'), :media => 'screen' %>
  </head>
  <body style="border: none;">
    <div class="container">

      <div class="row">
        <div class="col-xs-3">
          <div class="col-xs-12">
            <% if board.designer.logo_image.present? %>
                <%= image_tag board.designer.logo_image.attachment.url, class: 'img-responsive' %>
            <% end %>
          </div>
          <div class="col-xs-12">
            <span class="designer-name"><%= board.designer.full_name %></span><br>
            <span class="designer-address">
        <%= board.designer.designer_registrations.first.address1 %><br>
              <%= board.designer.designer_registrations.first.address2 %><br>

              <%= board.designer.designer_registrations.first.city %>,
              <%= board.designer.designer_registrations.first.state %>,
              <%= board.designer.designer_registrations.first.postal_code %><br>

        Phone: <%= board.designer.designer_registrations.first.phone %>
      </span>
          </div>
        </div>
        <div class="col-xs-6">
          <div class="text-center">
            <h1><%= board.name %></h1>
          </div>
          <div>
            <div class="board-section board-image-section text-center">
              <%= image_tag(board.board_image.attachment(:large), :class => "img-board img-responsive") %>
            </div>
          </div>
          <div>

          </div>
        </div>
        <div class="col-xs-3">

          <h1>Wall Colors</h1>
          <% board.colors.each do |color| %>
              <div class="row swatch-color-row">
                <div class="swatch-color-box col-xs-4" style="background-color: #<%= color.hex_val %>"></div>
                <div class="swatch-color-desc col-xs-8">
                  <div class="bold">
                    <%= color.name %>
                  </div>
                  <div>
                    <div class="col-xs-6 bold desc border">Swatch #</div>
                    <div class="col-xs-6 desc border"><%= color.swatch_val %></div>
                  </div>
                  <div>
                    <div class="col-xs-6 bold desc border">Hex</div>
                    <div class="col-xs-6 desc border"><%= color.hex_val %></div>
                  </div>
                </div>
              </div>
          <% end %>

        </div>
      </div>
      <div class="row designer-notes">
        <div class="col-xs-12 text-center">
          DESIGNER NOTES
        </div>
        <div class="col-xs-12 text-center">
          <%= board.project.description %>
        </div>
      </div>

      <% board.board_products.each do |bp| %>
          <div class="row invoice-bp">
            <div class="col-xs-6 text-center">
              <% bp.tear_sheet_images.each_with_index do |img,index| %>
                  <% if index == 0 %>
                      <div class="col-xs-12">
                        <%= image_tag img, class: "img-responsive img-center" %>
                      </div>
                  <% else %>
                      <div class="col-xs-3">
                        <%= image_tag img, class: "img-responsive img-center" %>
                      </div>
                  <% end %>
              <% end %>
            </div>
            <div class="col-xs-6 invoice-bp-color">
              <div class="text-center text-l mb">
                <%= bp.tear_sheet_data(:name) %>
              </div>
              <div class="text-center text-s mb">
                SKU: <%= bp.tear_sheet_data(:sku) %>
              </div>
              <div class="text-center text-m mb">
                $<%= bp.tear_sheet_data(:price) %>
              </div>
              <div>
                <% if bp.product.present? %>

                    <% if bp.tear_sheet_properties.present? %>
                        <div class="text-s">Details:</div>
                        <ul class="light">
                          <% bp.tear_sheet_properties.each do |prop| %>
                              <li><%= prop[0] %>: <%= prop[1] %></li>
                          <% end %>
                        </ul>
                    <% end %>

                    <% if bp.tear_sheet_dimensions(bp.product.master).present? %>
                        <div class="text-s">Weights & Dimensions</div>
                        <ul class="light">
                          <% bp.tear_sheet_dimensions(bp.product.master).each do |dim| %>
                              <li>
                                <%= dim[0] %>: <%= dim[1] %>
                              </li>
                          <% end %>
                        </ul>

                    <% end %>

                <% end %>
              </div>
            </div>
          </div>
      <% end %>

      <div style="page-break-before: always;"></div>

      <div class="row">
        <div class="col-xs-12">
          <%= image_tag wicked_pdf_asset_base64('frontend/store-logo.png'), class: 'img-responsive' %>
        </div>
      </div>
      <div class="row pdf-big-margin">
        <div class="col-xs-3">
          <div class="pdf-big-margin">
            <h1><%= designer.company_name %></h1>
            <%= designer.company_name %><br>
            <%= designer.location %><br>
          </div>

          <div class="pdf-small-margin">
            email: <br>
            <%= designer.email %><br>
            <%= designer.website_url.match('www') ? designer.website_url : "www.#{designer.website_url}" %>
          </div>
        </div>
        <div class="col-xs-9">
          <div class="pdf-small-margin">
            DATE<br>
            <%= DateTime.now.strftime("%B %d, %Y") %><br>
          </div>

          <div class="pdf-small-margin">
            TO: <%= DateTime.now.strftime("%B %d, %Y") %><br>
          </div>

          <div class="pdf-small-margin">
            INVOICE NUMBER: <%= rand(10000) %><br>
          </div>

          <div class="pdf-small-margin">
            TIME: 30 Days<br>
          </div>

          <%#= render 'private_invoice', board; board, board_products: board_products %>
          <table class="table pdf-table pdf-small-margin">
            <thead>
            <tr>
              <th style="width: 55%">DESCRIPION</th>
              <th style="width: 5%">QUANTITY</th>
              <th style="width: 20%">UNIT PRICE</th>
              <th style="width: 20%">COST</th>
            </tr>
            </thead>
            <tbody>

              <% board_products.each do |bp| %>
                <tr>
                  <td><%= bp.get_item_data('sku') %> <%= bp.get_item_data('name') %></td>
                  <td>1</td>
                  <td>$<span class="price-display"><%= bp.get_item_data('cost') %></span></td>
                  <td>$<span class="price-display"><%= bp.get_item_data('cost') %></span></td>
                </tr>
              <% end %>

              <!--<%# board_products.each do |k,v| %>-->
                <!--<%# v.each do |bp| %>-->
                  <!--<tr>-->
                    <!--<td><%#= v[0].get_item_data('sku') %> <%#= bp.get_item_data('name') %></td>-->
                    <!--<td><%#= k %></td>-->
                    <!--<td><%#= v[0].get_item_data('cost') %></td>-->
                    <!--<td><%#= v[0].get_item_data('cost') %></td>-->
                  <!--</tr>-->
                <!--<%# end %>-->
              <!--<%# end %>-->
  <!---->
              <!--<%# custom_products.each do |k,v| %>-->
                <!--<%# v.each do |bp| %>-->
                  <!--<tr>-->
                    <!--<td><%#= v[0].get_item_data('sku') %> <%#= bp.get_item_data('name') %></td>-->
                    <!--<td><%#= k %></td>-->
                    <!--<td><%#= v[0].get_item_data('cost') %></td>-->
                    <!--<td><%#= v[0].get_item_data('cost') %></td>-->
                  <!--</tr>-->
                <!--<%# end %>-->
              <!--<%# end %>-->

              <tr>
                <td colspan="3" class="text-right">Subtotal</td>
                <td>$<span class="price-display"><%= subtotal %></span></td>
              </tr>
              <tr>
                <td colspan="3" class="text-right">Sales Tax</td>
                <td>$<span class="price-display"><%= tax %></span></td>
              </tr>
              <tr>
                <td colspan="3" class="text-right">Shipping</td>
                <td>$<span class="price-display">??</span></td>
              </tr>
              <tr style="font-weight: bold;">
                <td colspan="3" class="text-right">Total</td>
                <td>$<span class="price-display"><%= total %></span></td>
              </tr>


            </tbody>
          </table>

          <div class="row">
            <div class="col-xs-2">
              <b>Subtotal:</b>
            </div>
            <div class="col-xs-3">
              <%= subtotal %>
            </div>
          </div>
          <div class="row">
            <div class="col-xs-2">
              <b>Sales Tax:</b>
            </div>
            <div class="col-xs-3">
              <%= tax %>
            </div>
          </div>
          <div class="row">
            <div class="col-xs-2">
              <b>Shipping:</b>
            </div>
            <div class="col-xs-3">
              ??
            </div>
          </div>
          <div class="row">
            <div class="col-xs-2">
              <b>Total:</b>
            </div>
            <div class="col-xs-3">
              <%= total %>
            </div>
          </div>

        </div>
      </div>
    </div>
  </body>
</html>
